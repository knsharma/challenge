#include <stdio.h>
#include <conio.h>
#include <iostream>

class sunlight
{
    typedef struct
    {
        double x,y;
        
    } Point;
    
    void main(int n, Point *s, Point p)
    {
        Point p1, p2, p3;
        //sort the coordinates entered in ascending x-axis values to know which building comes first
        for ( int a=(n-1); a>=0; a--)
        {
            for( int b=0; b<=a; b++)
            {
                p1=s[b];
                p2=s[a];
                
                if(p1.x>p2.x)
                {
                    p3=p1;
                    p1=p2;
                    p2=p3;
                    
                }
                
                if(p1.x[b]==p2.x[a])
                {
                    if(p1.y[b]>p2.y[a])
                    {
                        p3=p1;
                        p1=p2;
                        p2=p3;
                        
                    }
                    
                }
                
            }
            
        }
        
        double length=0;  //length of surface exposed to sun
        double h=0; //h is the height of building exposed to sun
        double w=0; //width of the building exposed to sun
        
        h=h+(s.y[1]-s.y[0]);
        w=w+(s.x[3]-s.x[1]);
        
        Point idc; //point of incidence of sunray
        
        for(int d=3; d<n; d=d+2)
        {
            m=((s.y[d]-p.y)/(s.x[d]-p.x));
            c=((m*(-(s.x[d])))+s.y[d]);
            
            idc.y=((m*s.x[(d+4)])+c);
            if((d+4)<=n)
            {
                if(idc.y<=s.y[(d+5)])
                {
                    idc.x=s.x[(d+4)];
                    h=h+(s.y[(d+5)]-idc.y);
                    w=w+(s.x[(d+7)]-idc.x);
                    
                }
                else
                continue;
                
            }
            else
            continue;
            
        }
        
        length=h+w;
        printf("Surface exposure: %lf", length);
        
    }
    
